@model Customer
@{
    ViewBag.Title = "Add";
    Html.RenderPartial("~/Views/Home/_ActionDefinitionUrls.cshtml");
}

<script>
    var customer = @Html.Raw(Json.Encode(Model));
    var method = @Html.Raw(Json.Encode(ViewBag.Method));
</script>

<div ng-controller="formCtrl" id="employee-form">
    <div class="container">
        <div class="page-header">
            <h1>{{method}} Customer</h1>
        </div>
        @using (Html.BeginForm())
        {
            <div class="row">
                <div class="form-group col-xs-6">
                    <label class="control-label">Name:</label>
                    <input type="text" name="Name" class="form-control" ng-model="customer.Name"/>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6">
                    <label class="control-label">Cell Phone:</label>
                    <input type="text" name="CellPhoneNum" class="form-control" ng-model="customer.CellPhoneNum"/>
                </div>
                <div class="form-group col-xs-6">
                    <label class="control-label">Home Phone:</label>
                    <input type="text" name="HomePhoneNum" class="form-control" ng-model="customer.HomePhoneNum"/>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-12">
                    <label class="control-label">Address:</label>
                    <input type="text" class="form-control" name="Address" ng-model="customer.Address"/>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-4">
                    <label class="control-label">City:</label>
                    <input type="text" class="form-control" name="City" ng-model="customer.City"/>
                </div>
                <div class="form-group col-xs-4">
                    <label class="control-label">State:</label>
                    <select class="form-control"
                            name="State"
                            ng-options="state.Abbreviation as state.Abbreviation for state in states"
                            ng-model="customer.State">
                    </select>
                </div>
                <div class="form-group col-xs-4">
                    <label class="control-label">Zip:</label>
                    <input type="text" class="form-control" name="Zip" ng-model="customer.Zip"/>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-12">
                    <label class="control-label">Notes:</label>
                    <textarea class="form-control" rows="3" ng-model="customer.Notes"></textarea>
                </div>
            </div>

            <h3>Equipment</h3>
            <hr/>
            <div ng-repeat="equipment in customer.CustEquip" class="form-equip">
                <span class="glyphicon glyphicon-remove-circle" ng-click="removeEquip(equipment)" title="Remove {{equipment.Name}}"></span>
                <div class="row">
                    <div class="form-group col-xs-11">
                        <label class="control-label">Name:</label>
                        <input type="text" class="form-control" ng-model="equipment.Name"/>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-4">
                        <label class="control-label">Model Num:</label>
                        <input type="text" class="form-control" ng-model="equipment.ModelNum"/>
                    </div>
                    <div class="form-group col-xs-4">
                        <label class="control-label">Serial Num:</label>
                        <input class="form-control" ng-model="equipment.SerialNum"/>
                    </div>
                    <div class="form-group col-xs-4">
                        <label class="control-label">Rent/Own:</label>
                        <div class="radio">
                            <label><input type="radio" ng-model="equipment.RentOwn" name="{{equipment.SerialNum}}RentOwn" value="Rent"/>Rent</label>
                        </div>
                        <div class="radio">
                            <label><input type="radio" ng-model="equipment.RentOwn" name="{{equipment.SerialNum}}RentOwn" value="Own"/>Own</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-6">
                        <label class="control-label">Type:</label>
                        <input class="form-control" ng-model="equipment.Type"/>
                    </div>
                    <div class="form-group col-xs-6">
                        <label class="control-label">Diagnostics</label>
                        <input class="form-control" ng-model="equipment.Diagnostics"/>
                    </div>
                </div>
                <hr/>
            </div>
            
            <div class="row">
                <div class="form-group">
                    <button type="button" class="btn btn-primary" ng-click="SaveCustomer()">Save Changes</button>
                    <button type="button" class="btn btn-default" ng-click="newEquip()">Add Equipment</button>
                </div>
            </div>
        }
    </div>
</div>