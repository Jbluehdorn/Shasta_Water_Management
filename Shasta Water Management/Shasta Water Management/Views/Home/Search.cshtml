@{
    ViewBag.Title = "Search";
    Html.RenderPartial("_ActionDefinitionUrls");
    Html.RenderPartial("_ConstantDefinitions");
}

<div class="search" ng-controller="searchCtrl">
    <div class="searchBar">
        <div class="search-group">
            <label>Search:</label>
            <div class="inner-addon">
                <input class="form-control" type="text" name="search" ng-model="searchTerm" />
                <span class="glyphicon glyphicon-search"></span>
            </div>
        </div>
        <div class="search-group">
            <label>Customers Per Page:</label>
            <select class="form-control" ng-model="customersPerPage" ng-options="n for n in [5, 10, 25]"></select>
        </div>
    </div>
    <table id="customer-table">
        <thead>
            <tr>
                <th ng-click="order('ID')">
                    ID
                    <span class="order" ng-show="orderTerm === 'ID'" ng-class="{'reverse': reverse}"></span>
                </th>
                <th ng-click="order('Name')">
                    Name
                    <span class="order" ng-show="orderTerm === 'Name'" ng-class="{'reverse': reverse}"></span>
                </th>
                <th ng-click="order('Phone')">
                    Phone
                    <span class="order" ng-show="orderTerm === 'Phone'" ng-class="{'reverse': reverse}"></span>
                </th>
                <th ng-click="order('LastServiceDate')">
                    Last Service Date
                    <span class="order" ng-show="orderTerm === 'LastServiceDate'" ng-class="{'reverse': reverse}"></span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="customer in pagedCustomers[currentPage] | filter:searchTerm | orderBy: orderTerm : reverse" ng-click="select(customer)">
                <td>{{customer.ID}}</td>
                <td>{{customer.Name}}</td>
                <td>{{customer.Phone}}</td>
                <td>{{customer.LastServiceDate | date: 'longDate'}}</td>
            </tr>
        </tbody>
        <tfoot>
        <td colspan="6">
            <ul>
                <li>
                    <a href ng-class="{'disabled': currentPage === 0}" ng-click="prev()">&lt;&lt; Prev</a>
                </li>
                <li ng-repeat="i in range()">
                    <a href ng-click="$parent.currentPage = i" ng-class="{'currentPage': currentPage === i}">{{i+1}}</a>
                </li>
                <li>
                    <a href ng-class="{'disabled': currentPage === pagedCustomers.length - 1}" ng-click="next()">Next &gt;&gt;</a>
                </li>
            </ul>
        </td>
        </tfoot>
    </table>
</div>
